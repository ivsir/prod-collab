{"ast":null,"code":"import _regeneratorRuntime from\"/Users/risvitareq/code/prod-collab/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/risvitareq/code/prod-collab/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/risvitareq/code/prod-collab/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/risvitareq/code/prod-collab/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/risvitareq/code/prod-collab/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{useMutation}from\"@apollo/client\";import{ADD_USER}from\"../../utils/mutations\";import AuthService from\"../../utils/auth\";import{AccountContext}from\"../../components/accountBox/AccountContext\";import{BoldLink,BoxContainer,FormContainer,Input,MutedLink,SubmitButton}from\"../accountBox/Common\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function SignupForm(){var _useState=useState({username:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useMutation=useMutation(ADD_USER),_useMutation2=_slicedToArray(_useMutation,2),addUser=_useMutation2[0],_useMutation2$=_useMutation2[1],error=_useMutation2$.error,data=_useMutation2$.data;var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;console.log(name,value,formState);setFormState(_objectSpread(_objectSpread({},formState),{},_defineProperty({},name,value)));};var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$addUser,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();console.log(\"This is the formstate: \".concat(formState));_context.prev=2;_context.next=5;return addUser({variables:_objectSpread({},formState)});case 5:_yield$addUser=_context.sent;_data=_yield$addUser.data;AuthService.login(_data.addUser.token);console.log(_data.addUser.token);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();//     \nvar _useContext=useContext(AccountContext),switchToSignin=_useContext.switchToSignin;return/*#__PURE__*/_jsxs(BoxContainer,{children:[/*#__PURE__*/_jsxs(FormContainer,{id:\"signup-container\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(Input,{id:\"signup-input1\",type:\"text\",placeholder:\"Username\",name:\"username\",value:formState.username,onChange:handleChange}),/*#__PURE__*/_jsx(Input,{id:\"signup-input2\",type:\"email\",placeholder:\"Email\",name:\"email\",value:formState.email,onChange:handleChange}),/*#__PURE__*/_jsx(Input,{id:\"signup-input3\",type:\"password\",placeholder:\"Password\",name:\"password\",value:formState.password,onChange:handleChange}),/*#__PURE__*/_jsx(SubmitButton,{id:\"signup-button\",type:\"submit\",children:\"Sign Up\"})]}),/*#__PURE__*/_jsxs(MutedLink,{id:\"muted-link\",href:\"#\",children:[\"Already have an account?\",/*#__PURE__*/_jsxs(BoldLink,{id:\"bold\",href:\"#\",onClick:switchToSignin,children:[\"Sign In\",\" \"]})]})]});}","map":{"version":3,"names":["useState","useContext","Link","useMutation","ADD_USER","AuthService","AccountContext","BoldLink","BoxContainer","FormContainer","Input","MutedLink","SubmitButton","jsx","_jsx","jsxs","_jsxs","SignupForm","_useState","username","email","password","_useState2","_slicedToArray","formState","setFormState","_useMutation","_useMutation2","addUser","_useMutation2$","error","data","handleChange","event","_event$target","target","name","value","console","log","_objectSpread","_defineProperty","handleFormSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$addUser","_data","wrap","_callee$","_context","prev","next","preventDefault","concat","variables","sent","login","token","t0","stop","_x","apply","arguments","_useContext","switchToSignin","children","id","onSubmit","type","placeholder","onChange","href","onClick"],"sources":["/Users/risvitareq/code/prod-collab/client/src/components/accountBox/SignupForm.js"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { useMutation } from \"@apollo/client\";\nimport { ADD_USER } from \"../../utils/mutations\";\n\nimport AuthService from \"../../utils/auth\";\n\nimport { AccountContext } from \"../../components/accountBox/AccountContext\";\n\nimport {\n  BoldLink,\n  BoxContainer,\n  FormContainer,\n  Input,\n  MutedLink,\n  SubmitButton,\n} from \"../accountBox/Common\";\n\nexport function SignupForm() {\n  const [formState, setFormState] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const [addUser, { error, data }] = useMutation(ADD_USER);\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    console.log(name,value, formState);\n    setFormState({\n      ...formState,\n      [name]: value,\n    });\n  };\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n    console.log(`This is the formstate: ${formState}`);\n\n    try {\n      const { data } = await addUser({\n        variables: { ...formState },\n      });\n      AuthService.login(data.addUser.token);\n      console.log(data.addUser.token);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n //     \n  const { switchToSignin } = useContext(AccountContext);\n\n  return (\n    <BoxContainer>\n      <FormContainer id=\"signup-container\" onSubmit={handleFormSubmit}>\n        <Input\n          id=\"signup-input1\"\n          type=\"text\"\n          placeholder=\"Username\"\n          name=\"username\"\n          value={formState.username}\n          onChange={handleChange}\n        />\n        <Input\n          id=\"signup-input2\"\n          type=\"email\"\n          placeholder=\"Email\"\n          name=\"email\"\n          value={formState.email}\n          onChange={handleChange}\n        />\n        <Input\n          id=\"signup-input3\"\n          type=\"password\"\n          placeholder=\"Password\"\n          name=\"password\"\n          value={formState.password}\n          onChange={handleChange}\n        />\n      <SubmitButton id=\"signup-button\" type=\"submit\">\n        Sign Up\n      </SubmitButton>\n      </FormContainer>\n      <MutedLink id=\"muted-link\" href=\"#\">\n        Already have an account?\n        <BoldLink id=\"bold\" href=\"#\" onClick={switchToSignin}>\n          Sign In{\" \"}\n        </BoldLink>\n      </MutedLink>\n    </BoxContainer>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}