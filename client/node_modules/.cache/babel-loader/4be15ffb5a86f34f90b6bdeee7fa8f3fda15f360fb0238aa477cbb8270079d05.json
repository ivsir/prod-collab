{"ast":null,"code":"var _jsxFileName = \"/Users/risvitareq/code/CodeCollab2/client/src/components/accountBox/ProjectForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useMutation } from \"@apollo/client\";\nimport { ADD_PROJECT } from \"../../utils/mutations\";\n// import { QUERY_PROJECTS, QUERY_ME } from \"../../utils/queries\";\n\nimport Auth from \"../../utils/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProjectForm = () => {\n  _s();\n  const [projectTitle, setProjectTitle] = useState(\"\");\n  const [projectDescription, setProjectDescription] = useState(\"\");\n  const [characterCount, setCharacterCount] = useState(0);\n  const [characterCount2, setCharacterCount2] = useState(0);\n  const [addProject, {\n    error\n  }] = useMutation(ADD_PROJECT, {\n    update(cache, _ref) {\n      let {\n        data: {\n          addProject\n        }\n      } = _ref;\n      try {\n        // const { projects } = cache.readQuery({ query: QUERY_PROJECTS });\n        // cache.writeQuery({\n        //   query: QUERY_PROJECTS,\n        //   data: { projects: [addProject, ...projects] },\n        // });\n      } catch (e) {\n        console.error(e);\n      }\n\n      // update me object's cache\n      // const { me } = cache.readQuery({ query: QUERY_ME });\n      // cache.writeQuery({\n      //   query: QUERY_ME,\n      //   data: { me: { ...me, projects: [...me.projects, addProject] } },\n      // });\n    }\n  });\n\n  const handleFormSubmit = async event => {\n    event.preventDefault();\n    try {\n      const {\n        data\n      } = await addProject({\n        variables: {\n          projectTitle,\n          projectDescription,\n          projectAuthor: Auth.getProfile().data.username\n        }\n      });\n      setProjectTitle(\"\");\n      setProjectDescription(\"\");\n      window.location.assign(\"/profile\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    if (name === \"projectTitle\" && value.length <= 280) {\n      setProjectTitle(value);\n      setCharacterCount(value.length);\n    }\n    if (name === \"projectDescription\" && value.length <= 2000) {\n      setProjectDescription(value);\n      setCharacterCount2(value.length);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"project-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"What's on your techy mind?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), Auth.loggedIn() ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex-row justify-center justify-space-between-md align-center\",\n        onSubmit: handleFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-9\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"projectTitle\",\n            placeholder: \"Project Title...\",\n            value: projectTitle,\n            className: \"form-input w-100\",\n            style: {\n              lineHeight: \"1.5\",\n              resize: \"vertical\"\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `m-0 ${characterCount === 280 || error ? \"text-danger\" : \"\"}`,\n            children: [\"Character Count: \", characterCount, \"/280\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-9\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"projectDescription\",\n            placeholder: \"Project Description...\",\n            value: projectDescription,\n            className: \"form-input w-100\",\n            style: {\n              lineHeight: \"1.5\",\n              resize: \"vertical\"\n            },\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `m-0 ${characterCount2 === 2000 || error ? \"text-danger\" : \"\"}`,\n            children: [\"Character Count: \", characterCount2, \"/2000\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-3\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-block py-3\",\n            type: \"submit\",\n            children: \"Add Project\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 my-3 bg-danger text-white p-3\",\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"You need to be logged in to create a project. Please\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(ProjectForm, \"wQ0qIC3qsjJYqq4niymj0iFnFaw=\", false, function () {\n  return [useMutation];\n});\n_c = ProjectForm;\nexport default ProjectForm;\nvar _c;\n$RefreshReg$(_c, \"ProjectForm\");","map":{"version":3,"names":["React","useState","Link","useMutation","ADD_PROJECT","Auth","jsxDEV","_jsxDEV","Fragment","_Fragment","ProjectForm","_s","projectTitle","setProjectTitle","projectDescription","setProjectDescription","characterCount","setCharacterCount","characterCount2","setCharacterCount2","addProject","error","update","cache","_ref","data","e","console","handleFormSubmit","event","preventDefault","variables","projectAuthor","getProfile","username","window","location","assign","err","handleChange","name","value","target","length","class","children","fileName","_jsxFileName","lineNumber","columnNumber","loggedIn","className","onSubmit","placeholder","style","lineHeight","resize","onChange","type","message","to","_c","$RefreshReg$"],"sources":["/Users/risvitareq/code/CodeCollab2/client/src/components/accountBox/ProjectForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useMutation } from \"@apollo/client\";\n\nimport { ADD_PROJECT } from \"../../utils/mutations\";\n// import { QUERY_PROJECTS, QUERY_ME } from \"../../utils/queries\";\n\nimport Auth from \"../../utils/auth\";\n\nconst ProjectForm = () => {\n  const [projectTitle, setProjectTitle] = useState(\"\");\n  const [projectDescription, setProjectDescription] = useState(\"\");\n\n  const [characterCount, setCharacterCount] = useState(0);\n  const [characterCount2, setCharacterCount2] = useState(0);\n\n  const [addProject, { error }] = useMutation(ADD_PROJECT, {\n    update(cache, { data: { addProject } }) {\n      try {\n        // const { projects } = cache.readQuery({ query: QUERY_PROJECTS });\n        // cache.writeQuery({\n        //   query: QUERY_PROJECTS,\n        //   data: { projects: [addProject, ...projects] },\n        // });\n      } catch (e) {\n        console.error(e);\n      }\n\n      // update me object's cache\n      // const { me } = cache.readQuery({ query: QUERY_ME });\n      // cache.writeQuery({\n      //   query: QUERY_ME,\n      //   data: { me: { ...me, projects: [...me.projects, addProject] } },\n      // });\n    },\n  });\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      const { data } = await addProject({\n        variables: {\n          projectTitle,\n          projectDescription,\n          projectAuthor: Auth.getProfile().data.username,\n        },\n      });\n      setProjectTitle(\"\");\n      setProjectDescription(\"\");\n    window.location.assign(\"/profile\")\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    if (name === \"projectTitle\" && value.length <= 280) {\n      setProjectTitle(value);\n      setCharacterCount(value.length);\n    }\n    if (name === \"projectDescription\" && value.length <= 2000) {\n      setProjectDescription(value);\n      setCharacterCount2(value.length);\n    }\n  };\n\n  return (\n    <div class=\"project-form\">\n      <h3>What's on your techy mind?</h3>\n\n      {Auth.loggedIn() ? (\n        <>\n\n          <form\n            className=\"flex-row justify-center justify-space-between-md align-center\"\n            onSubmit={handleFormSubmit}\n          >\n            <div className=\"col-12 col-lg-9\">\n              <textarea\n                name=\"projectTitle\"\n                placeholder=\"Project Title...\"\n                value={projectTitle}\n                className=\"form-input w-100\"\n                style={{ lineHeight: \"1.5\", resize: \"vertical\" }}\n                onChange={handleChange}\n              ></textarea>\n                      <p\n            className={`m-0 ${\n              characterCount === 280|| error ? \"text-danger\" : \"\"\n            }`}\n          >\n            Character Count: {characterCount}/280\n          </p>\n            </div>\n            <div className=\"col-12 col-lg-9\">\n              <textarea\n                name=\"projectDescription\"\n                placeholder=\"Project Description...\"\n                value={projectDescription}\n                className=\"form-input w-100\"\n                style={{ lineHeight: \"1.5\", resize: \"vertical\" }}\n                onChange={handleChange}\n              ></textarea>\n                        <p\n            className={`m-0 ${\n              characterCount2 === 2000 || error ? \"text-danger\" : \"\"\n            }`}\n          >\n            Character Count: {characterCount2}/2000\n          </p>\n            </div>\n\n            <div className=\"col-12 col-lg-3\">\n              <button className=\"btn btn-primary btn-block py-3\" type=\"submit\">\n                Add Project\n              </button>\n            </div>\n            {error && (\n              <div className=\"col-12 my-3 bg-danger text-white p-3\">\n                {error.message}\n              </div>\n            )}\n          </form>\n        </>\n      ) : (\n        <p>\n          You need to be logged in to create a project. Please{\" \"}\n          <Link to=\"/\">login</Link>.\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default ProjectForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}