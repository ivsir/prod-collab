{"ast":null,"code":"import _regeneratorRuntime from\"/Users/risvitareq/code/CodeCollabNew/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/risvitareq/code/CodeCollabNew/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/risvitareq/code/CodeCollabNew/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/risvitareq/code/CodeCollabNew/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/risvitareq/code/CodeCollabNew/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useContext}from\"react\";import{AccountContext}from\"../../components/accountBox/AccountContext\";import{BoldLink,BoxContainer,FormContainer,Input,MutedLink,SubmitButton}from\"../accountBox/Common\";import AuthService from\"../../utils/auth\";import{useMutation}from\"@apollo/client\";import{LOGIN_USER}from\"../../utils/mutations\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function LoginForm(props){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useMutation=useMutation(LOGIN_USER),_useMutation2=_slicedToArray(_useMutation,2),login=_useMutation2[0],_useMutation2$=_useMutation2[1],error=_useMutation2$.error,data=_useMutation2$.data;// update state based on form input changes\nvar handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormState(_objectSpread(_objectSpread({},formState),{},_defineProperty({},name,value)));};// submit form\nvar handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$login,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(formState);event.preventDefault();_context.prev=2;_context.next=5;return login({variables:_objectSpread({},formState)});case 5:_yield$login=_context.sent;_data=_yield$login.data;AuthService.login(_data.login.token);console.log(_data.login.token);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 14:// clear form values\nsetFormState({email:'',password:''});case 15:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();var _useContext=useContext(AccountContext),switchToSignup=_useContext.switchToSignup;return/*#__PURE__*/_jsxs(BoxContainer,{children:[/*#__PURE__*/_jsxs(FormContainer,{id:\"login-container\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(Input,{id:\"login-input1\",type:\"email\",placeholder:\"Email\",name:\"email\",value:formState.email,onChange:handleChange}),/*#__PURE__*/_jsx(Input,{id:\"login-input2\",type:\"password\",placeholder:\"Password\",name:\"password\",value:formState.password,onChange:handleChange}),/*#__PURE__*/_jsx(SubmitButton,{id:\"login-button\",type:\"submit\",children:\"Sign In\"})]}),/*#__PURE__*/_jsxs(MutedLink,{id:\" muted-link\",href:\"#\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(BoldLink,{id:\"bold\",href:\"#\",onClick:switchToSignup,children:\"Sign Up\"})]})]});}","map":{"version":3,"names":["useState","useContext","AccountContext","BoldLink","BoxContainer","FormContainer","Input","MutedLink","SubmitButton","AuthService","useMutation","LOGIN_USER","jsx","_jsx","jsxs","_jsxs","LoginForm","props","_useState","email","password","_useState2","_slicedToArray","formState","setFormState","_useMutation","_useMutation2","login","_useMutation2$","error","data","handleChange","event","_event$target","target","name","value","_objectSpread","_defineProperty","handleFormSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$login","_data","wrap","_callee$","_context","prev","next","console","log","preventDefault","variables","sent","token","t0","stop","_x","apply","arguments","_useContext","switchToSignup","children","id","onSubmit","type","placeholder","onChange","href","onClick"],"sources":["/Users/risvitareq/code/CodeCollabNew/client/src/components/accountBox/LoginForm.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useContext } from \"react\";\nimport { AccountContext } from \"../../components/accountBox/AccountContext\";\nimport {\n  BoldLink,\n  BoxContainer,\n  FormContainer,\n  Input,\n  MutedLink,\n  SubmitButton,\n} from \"../accountBox/Common\";\n\nimport AuthService from \"../../utils/auth\";\n\nimport { useMutation } from \"@apollo/client\";\nimport { LOGIN_USER } from \"../../utils/mutations\";\n\n\n\nexport function LoginForm(props) {\n  const [formState, setFormState] = useState({ email: '', password: '' });\n  const [login, { error, data }] = useMutation(LOGIN_USER);\n\n  // update state based on form input changes\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n\n    setFormState({\n      ...formState,\n      [name]: value,\n    });\n  };\n\n  // submit form\n  const handleFormSubmit = async (event) => {\n    console.log(formState);\n    event.preventDefault();\n    try {\n      const { data } = await login({\n        variables: { ...formState },\n      });\n\n      AuthService.login(data.login.token);\n      console.log(data.login.token);\n    } catch (e) {\n      console.error(e);\n    }\n\n    // clear form values\n    setFormState({\n      email: '',\n      password: '',\n    });\n  };\n\n  const { switchToSignup } = useContext(AccountContext);\n\n  return (\n    <BoxContainer>\n      <FormContainer id=\"login-container\" onSubmit={handleFormSubmit}>\n        <Input\n          id=\"login-input1\"\n          type=\"email\"\n          placeholder=\"Email\"\n          name=\"email\"\n          value={formState.email} \n          onChange={handleChange}\n          />\n        <Input\n          id=\"login-input2\"\n          type=\"password\"\n          placeholder=\"Password\"\n          name=\"password\"\n          value={formState.password}\n          onChange={handleChange}\n           />\n        <SubmitButton id=\"login-button\" type=\"submit\">Sign In</SubmitButton>\n      </FormContainer>\n\n\n      <MutedLink id=\" muted-link\" href=\"#\">\n        Don't have an account?\n        <BoldLink id=\"bold\" href=\"#\" onClick={switchToSignup}>\n          Sign Up\n        </BoldLink>\n      </MutedLink>\n    </BoxContainer>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}